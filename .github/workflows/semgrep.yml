# AUTOGENERATED FROM semgrep.jsonnet DO NOT MODIFY
jobs:
  semgrep-ci:
    container:
      image: semgrep/semgrep:canary
    env:
      E2E_APP_TOKEN: ${{ secrets.SEMGREP_E2E_APP_TOKEN }}
      SEMGREP_APP_TOKEN: ${{ secrets.SEMGREP_APP_TOKEN }}
    if: (github.actor != 'dependabot[bot]')
    runs-on: ubuntu-24.04
    steps:
      - if: ${{ runner.os == 'Linux' }}
        name: Tune Linux Network
        run: sudo ethtool -K eth0 tx off rx off || ethtool -K ens4 tx off rx off || true
        shell: bash
      - if: ${{ runner.os == 'macOS' }}
        name: Tune macOS Network
        run: |
          sudo sysctl -w net.link.generic.system.hwcksum_tx=0
          sudo sysctl -w net.link.generic.system.hwcksum_rx=0
        shell: bash
      - uses: actions/checkout@v4
      - run: semgrep ci
  semgrep-ci-debug:
    container:
      image: semgrep/semgrep:canary
    env:
      E2E_APP_TOKEN: ${{ secrets.SEMGREP_E2E_APP_TOKEN }}
      SEMGREP_APP_TOKEN: ${{ secrets.SEMGREP_APP_TOKEN }}
    if: (github.actor != 'dependabot[bot]')
    runs-on: ubuntu-24.04
    steps:
      - if: ${{ runner.os == 'Linux' }}
        name: Tune Linux Network
        run: sudo ethtool -K eth0 tx off rx off || ethtool -K ens4 tx off rx off || true
        shell: bash
      - if: ${{ runner.os == 'macOS' }}
        name: Tune macOS Network
        run: |
          sudo sysctl -w net.link.generic.system.hwcksum_tx=0
          sudo sysctl -w net.link.generic.system.hwcksum_rx=0
        shell: bash
      - uses: actions/checkout@v4
      - run: semgrep ci --debug
  semgrep-ci-oss:
    container:
      image: semgrep/semgrep:canary
    env:
      E2E_APP_TOKEN: ${{ secrets.SEMGREP_E2E_APP_TOKEN }}
      SEMGREP_APP_TOKEN: ${{ secrets.SEMGREP_APP_TOKEN }}
    if: (github.actor != 'dependabot[bot]')
    runs-on: ubuntu-24.04
    steps:
      - if: ${{ runner.os == 'Linux' }}
        name: Tune Linux Network
        run: sudo ethtool -K eth0 tx off rx off || ethtool -K ens4 tx off rx off || true
        shell: bash
      - if: ${{ runner.os == 'macOS' }}
        name: Tune macOS Network
        run: |
          sudo sysctl -w net.link.generic.system.hwcksum_tx=0
          sudo sysctl -w net.link.generic.system.hwcksum_rx=0
        shell: bash
      - uses: actions/checkout@v4
      - run: semgrep ci --oss-only
name: semgrep
on:
  pull_request_target: {}
  push:
    branches:
      - develop
  schedule:
    - cron: 50 15 * * *
  workflow_dispatch: null
